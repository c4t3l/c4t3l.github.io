<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>robbyc.io</title><link href="https://blog.robbyc.io/" rel="alternate"></link><link href="https://blog.robbyc.io/feeds/all.atom.xml" rel="self"></link><id>https://blog.robbyc.io/</id><updated>2019-06-15T00:00:00-05:00</updated><entry><title>Fun With Ed(1)</title><link href="https://blog.robbyc.io/fun-with-ed.html" rel="alternate"></link><published>2019-06-15T00:00:00-05:00</published><updated>2019-06-15T00:00:00-05:00</updated><author><name>Robert Callicotte</name></author><id>tag:blog.robbyc.io,2019-06-15:/fun-with-ed.html</id><summary type="html">&lt;p&gt;The most user-hostile editor ever created&lt;/p&gt;</summary><content type="html">&lt;p&gt;The ed text editor was one of the first key elements of the Unix operating system.  It has been described as one of the most user-hostile text editors ever created.  It operates in two distinct modes: command and input.  Here are some fun examples you can use to impress onlookers at your next dinner party!&lt;/p&gt;
&lt;h2&gt;Open a file&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ed tennyson.txt
226
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Print all lines&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;,p
Cannon to right of them,
Cannon to left of them,
Cannon in front of them
Volley&amp;#39;d and thunder&amp;#39;d;
Storm&amp;#39;d at with shot and shell,
Boldly they rode and well,
Into the jaws of Death,
Into the mouth of Hell
Rode the six hundred.
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Print first line&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;1p
Cannon to right of them,
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Print last line&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$p
Rode the six hundred.
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Edit last line&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$p
Rode the six hundred.
s/six/nine/p
Rode the nine hundred.
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Escaping edit mode&lt;/h2&gt;
&lt;p&gt;To escape out of edit mode you simply need to have a single line with &lt;code&gt;.&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Rode the nine hundred.
.
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Append to a line&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$a
Here is a new line
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Write buffer to file (save)&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;w &amp;lt;filename&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Quit Ed(1)&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;q
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see there are lots of fun ways to edit a file with ed(1).  I just touched on the basics here.  There is an entire new world of editing possible when you include the use of regex.  Ed(1) is lightweight also!  Clocking in at about 117k, it's much smaller than vim or emacs.  For the scoop on all of its features see the man or info pages.&lt;/p&gt;</content></entry><entry><title>New Blog</title><link href="https://blog.robbyc.io/new-blog-system.html" rel="alternate"></link><published>2019-06-08T00:00:00-05:00</published><updated>2019-06-08T00:00:00-05:00</updated><author><name>Robert Callicotte</name></author><id>tag:blog.robbyc.io,2019-06-08:/new-blog-system.html</id><summary type="html">&lt;p&gt;Migrating to pelican static site generator&lt;/p&gt;</summary><content type="html">&lt;p&gt;After a long hiatus I am migrating and updating my blog from using hexo to pelican.  It's written in python.  And it's cool!!  &lt;/p&gt;
&lt;p&gt;After looking through my old content, it's apparent that I'm missing some posts.  Maybe I can find some of them cached somewhere?&lt;/p&gt;</content></entry><entry><title>Saltstack Orchestration Testing</title><link href="https://blog.robbyc.io/saltstack-orchestration-testing.html" rel="alternate"></link><published>2019-06-08T00:00:00-05:00</published><updated>2019-06-08T00:00:00-05:00</updated><author><name>Robert Callicotte</name></author><id>tag:blog.robbyc.io,2019-06-08:/saltstack-orchestration-testing.html</id><summary type="html">&lt;p&gt;Testing Saltstack orchestration&lt;/p&gt;</summary><content type="html">&lt;h3&gt;Simple Setup&lt;/h3&gt;
&lt;p&gt;This simple setup defines the initial POC for this work.  The following items must exist:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Default Qemu image&lt;/li&gt;
&lt;li&gt;Socket networking for qemu configured&lt;/li&gt;
&lt;li&gt;User mode (SLIRP) networking for qemu configured&lt;/li&gt;
&lt;li&gt;Entropy device passthru active in qemu? (see virtio section of qemu manual)&lt;/li&gt;
&lt;li&gt;Salt minion already installed in qemu image&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Qemu commands&lt;/h3&gt;
&lt;p&gt;The following will be translated (eventually...) to python for use with pytest&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Test system1 mcast socket
qemu-system-x86_64 -daemonize \
-display gtk \
-m 512 \
-enable-kvm \
-device e1000,netdev=n0,mac=52:54:00:12:34:56 \
-netdev user,id=n0,hostfwd=tcp::1111-:22 \
-device e1000,netdev=n1,mac=52:54:00:12:34:57 \
-netdev socket,id=n1,mcast=230.0.0.1:1234,localaddr=127.0.0.1 \
-device virtio-rng-pci \
-device virtio-scsi-pci,id=scsi \
-device scsi-hd,drive=drive0 \
-drive if=none,id=drive0,snapshot=on,file=/var/lib/libvirt/images/centos7_test.qcow2

# Test system2 mcast socket
qemu-system-x86_64 -daemonize \
-display gtk \
-m 512 \
-enable-kvm \
-device e1000,netdev=n2,mac=52:54:00:12:34:58 \
-netdev user,id=n2,hostfwd=tcp::2222-:22 \
-device e1000,netdev=n3,mac=52:54:00:12:34:59 \
-netdev socket,id=n3,mcast=230.0.0.1:1234,localaddr=127.0.0.1 \
-device virtio-rng-pci \
-device virtio-scsi-pci,id=scsi \
-device scsi-hd,drive=drive0 \
-drive if=none,id=drive0,snapshot=on,file=/var/lib/libvirt/images/centos7_test.qcow2

# Test system3 mcast socket
qemu-system-x86_64 -daemonize \
-display gtk \
-m 512 \
-enable-kvm \
-device e1000,netdev=n4,mac=52:54:00:12:34:60 \
-netdev user,id=n4,hostfwd=tcp::3333-:22 \
-device e1000,netdev=n5,mac=52:54:00:12:34:61 \
-netdev socket,id=n5,mcast=230.0.0.1:1234,localaddr=127.0.0.1 \
-device virtio-rng-pci \
-device virtio-scsi-pci,id=scsi \
-device scsi-hd,drive=drive0 \
-drive if=none,id=drive0,snapshot=on,file=/var/lib/libvirt/images/centos7_test.qcow2
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Qemu setup&lt;/h3&gt;
&lt;p&gt;Once the images are booted, networking needs to be configured on the guests to allow connectivity between them.&lt;/p&gt;
&lt;p&gt;Host 1 (master): &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;nmcli con mod &amp;quot;Wired connection 2&amp;quot; ipv4.addresses &amp;quot;10.0.200.101/24&amp;quot;
nmcli con mod &amp;quot;Wired connection 2&amp;quot; ipv4.method manual

Git setup required
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Host 2 (minion):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;nmcli con mod &amp;quot;Wired connection 2&amp;quot; ipv4.addresses &amp;quot;10.0.200.102/24&amp;quot;
nmcli con mod &amp;quot;Wired connection 2&amp;quot; ipv4.method manual

echo &amp;quot;10.0.200.101 cicdsalt&amp;quot; &amp;gt;&amp;gt; /etc/hosts
echo &amp;quot;minion0&amp;quot; &amp;gt; /etc/salt/minion_id
systemctl restart salt-minion
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Host 3 (minion):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;nmcli con mod &amp;quot;Wired connection 2&amp;quot; ipv4.addresses &amp;quot;10.0.200.103/24&amp;quot;
nmcli con mod &amp;quot;Wired connection 2&amp;quot; ipv4.method manual

echo &amp;quot;10.0.200.101 cicdsalt&amp;quot; &amp;gt;&amp;gt; /etc/hosts
echo &amp;quot;minion1&amp;quot; &amp;gt; /etc/salt/minion_id
systemctl restart salt-minion
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;SSH to guests via &lt;code&gt;ssh -p1111 kitchen@localhost -o StrictHostKeyChecking=no&lt;/code&gt;&lt;/p&gt;</content><category term="salt"></category><category term="qemu"></category><category term="devops"></category></entry></feed>